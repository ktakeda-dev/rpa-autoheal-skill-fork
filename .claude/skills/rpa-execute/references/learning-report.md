# 学びレポート

<!--
## 目的
フォールバックなしでキャッシュスクリプトだけで全ステップが高速実行できるようにYAMLを改善する。
フォールバックが発生した = YAMLに問題がある → このレポートで原因分析・改善提案 → YAMLを修正
-->

## 実行サマリー
- ワークフロー: {{workflow_name}}
- 処理件数: {{success_count}}件成功 / {{failure_count}}件失敗
- 実行日時: {{execution_date}}

## 対応状況: 未対応

<!-- 対応状況は以下のいずれか:
- 未対応: まだYAMLに反映していない
- 解決済み: YAMLを修正して対応完了
- 対応不要: 一時的な問題、または手動対応で解決済み
-->

<!--
「発生した問題と対処」セクションは削除。
フォールバック発生箇所に統合する。
-->

## フォールバック発生箇所

実行中にMCPフォールバックが発生したステップ:

| ステップ | セレクタ | 原因 | 改善案 |
|----------|----------|------|--------|
| {{step_name}} | `{{selector}}` | {{reason}} | {{improvement}} |

<!--
フォールバックの原因:
- タイムアウト: セレクタが見つからなかった
- ダイアログ発生: ファイル選択などMCP必須の操作
- 要素不可視: 要素は存在するがクリック不可

改善案の例:
- `page.locator('selector').first()` で最初の要素を選択
- より具体的なセレクタに変更
- 待機時間を追加
- 仕様上MCP必須（改善不可）

フォールバックなしの場合は「なし」と記載
-->

## YAMLへの改善提案

問題が発生した場合、以下の観点で改善案を提示:

- **条件分岐の追加（when）**: どのような条件で分岐が必要か
- **新しいステップの追加**: 追加が必要なステップ
- **固定値の見直し**: 動的に変更すべき値

### 具体的な修正案

```yaml
# 現在
- name: ステップ名
  action: fill
  value: "固定値"

# 提案: when で条件分岐
- name: ステップ名（条件A）
  action: fill
  value: "値A"
  when: "extract.field <= 10000"

- name: ステップ名（条件B）
  action: fill
  value: "値B"
  when: "extract.field > 10000"
```

<!--
when の書き方:
- 単一条件: when: "extract.amount > 10000"
- 複数条件: when: ["条件1", "条件2"] + match: all/any
- 演算子: ==, !=, >, <, >=, <=
- 参照: extract.*, input.*, constants.*

改善不要の場合は「改善提案なし」と記載
-->

## 次回実行時の注意点

- {{注意点1}}
- {{注意点2}}

<!-- 注意点がない場合は「特になし」と記載 -->

## YAML修正の依頼方法

学びレポートの内容を基にYAMLを修正する場合は、**探索モード（`/rpa-explore`）** を使用してください。

```
「学びレポートを基にYAMLを修正して」
「このワークフローの〇〇を△△に変えて」
```
